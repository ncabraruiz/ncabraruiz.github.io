const collections = [
    {
        "id": 1,
        "cover_path": "cover/mextasis_2021.jpg",
        "year": 2021,
        "name": "Mextasis"
    },

    {
        "id": 2,
        "cover_path": "cover/europe_2021.jpg",
        "year": 2021,
        "name": "Europe"
    },

    {
        "id": 3,
        "cover_path": "cover/mextasis_2023.JPG",
        "year": 2023,
        "name": "Mextasis"
    },

    {
        "id": 4,
        "cover_path": "cover/europe_2023.jpg",
        "year": 2023,
        "name": "Europe"
    },

    {
        "id": 5,
        "cover_path": "cover/denver_2023.jpg",
        "year": 2023,
        "name": "Denver"
    },

    {
        "id": 6,
        "cover_path": "cover/mendihuaca_2023.jpg",
        "year": 2023,
        "name": "Mendihuaca"
    },

    {
        "id": 7,
        "cover_path": "cover/metrallo_2024.jpg",
        "year": 2024,
        "name": "Metrallo"
    },

    {
        "id": 8,
        "cover_path": "cover/buenos_aires_2024.jpg",
        "year": 2024,
        "name": "Buenos Aires"
    },

    {
        "id": 9,
        "cover_path": "cover/darien.jpg",
        "year": "",
        "name": "Darien"
    },

    {
        "id": 10,
        "cover_path": "cover/chile_2022.jpg",
        "year": 2022,
        "name": "Chile"
    },

    {
        "id": 11,
        "cover_path": "cover/bogota.jpg",
        "year": "",
        "name": "Bogotá"
    },

    {
        "id": 12,
        "cover_path": "cover/dec_2024_may_2023.jpg",
        "year": "",
        "name": "DEC 2024 - MAY 2023"
    }
];


const photos = [
    {
        "id_collection": 11,
        "id": 1,
        "path": "photos/Bogotá/Nicolas_C_20240214_0059.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 2,
        "path": "photos/Bogotá/Nicolas_C_20240214_0060.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 3,
        "path": "photos/Bogotá/Nicolas_C_20240214_0061.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 4,
        "path": "photos/Bogotá/NicolasCabra_20211109_0029.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 5,
        "path": "photos/Bogotá/NicolasCabra_20211109_0030.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 6,
        "path": "photos/Bogotá/NicolasCabra_20211109_0032.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 7,
        "path": "photos/Bogotá/NicolasCabra_20211109_0035.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 8,
        "path": "photos/Bogotá/NicolasCabra_20211109_0036.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 9,
        "path": "photos/Bogotá/NicolasCabra_20211109_0037.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 10,
        "path": "photos/Bogotá/NicolasCabra_20211109_0038.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 11,
        "path": "photos/Bogotá/NicolasCabra_20211109_0039.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 12,
        "path": "photos/Bogotá/NicolasCabra_20211109_0040.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 13,
        "path": "photos/Bogotá/NicolasCabra_20211109_0041.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 14,
        "path": "photos/Bogotá/NicolasCabra_20211109_0047.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 15,
        "path": "photos/Bogotá/NicolasCabra_20211109_0048.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 16,
        "path": "photos/Bogotá/NicolasCabra_20211109_0049.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 17,
        "path": "photos/Bogotá/NicolasCabra_20211109_0050.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 18,
        "path": "photos/Bogotá/NicolasCabra_20211109_0051.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 19,
        "path": "photos/Bogotá/NicolasCabra_20211109_0052.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 20,
        "path": "photos/Bogotá/NicolasCabra_20211109_0053.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 21,
        "path": "photos/Bogotá/NicolasCabra_20211109_0054.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 22,
        "path": "photos/Bogotá/NicolasCabra_20211109_0055.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 23,
        "path": "photos/Bogotá/NicolasCabra_20211109_0056.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 24,
        "path": "photos/Bogotá/NicolasCabra_20211109_0057.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 25,
        "path": "photos/Bogotá/NicolasCabra_20211109_0058.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 26,
        "path": "photos/Bogotá/NicolasCabra_20211109_0059.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 27,
        "path": "photos/Bogotá/Nicolás_C_20230524_0033.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 28,
        "path": "photos/Bogotá/Nicolás_C_20230524_0034.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 29,
        "path": "photos/Bogotá/Nicolás_C_20230524_0099.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 30,
        "path": "photos/Bogotá/Nicolás_C_20230524_0100.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 31,
        "path": "photos/Bogotá/Nicolás_C_20230524_0101.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 32,
        "path": "photos/Bogotá/Nicolás_C_20230524_0109.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 33,
        "path": "photos/Bogotá/Nicolás_C_20230524_0110.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 34,
        "path": "photos/Bogotá/Nicolás_C_20230524_0111.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 35,
        "path": "photos/Bogotá/Nicolás_C_20230524_0112.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 36,
        "path": "photos/Bogotá/Nicolás_C_20230524_0113.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 37,
        "path": "photos/Bogotá/Nicolás_C_20230524_0114.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 38,
        "path": "photos/Bogotá/Nicolás_C_20230524_0115.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 39,
        "path": "photos/Bogotá/Nicolás_C_20230524_0116.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 40,
        "path": "photos/Bogotá/Nicolás_C_20230524_0117.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 41,
        "path": "photos/Bogotá/Nicolás_C_20230524_0118.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 42,
        "path": "photos/Bogotá/Nicolás_C_20230524_0119.jpg",
        "description": ""
    },
    {
        "id_collection": 11,
        "id": 43,
        "path": "photos/Bogotá/Nicolás_C_20230524_0120.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 44,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0009.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 45,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0010.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 46,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0041.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 47,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0002.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 48,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0003.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 49,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0004.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 50,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0005.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 51,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0006.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 52,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0007.jpg",
        "description": ""
    },
    {
        "id_collection": 1,
        "id": 53,
        "path": "photos/Mextasis 2021/nicolas cabra_20211201_0008.jpg",
        "description": ""
    },

    {
        "id_collection": 2,
        "id": 54,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0001.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 55,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0002.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 56,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0003.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 57,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0004.jpg",
        "description": "Lorem ipsum dom dollar"
    },

    {
        "id_collection": 2,
        "id": 58,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0005.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 59,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0006.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 60,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0007.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 61,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0008.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 62,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0009.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 63,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0010.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 64,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0011.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 65,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0012.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 66,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0013.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 67,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0014.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 68,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0015.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 69,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0016.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 70,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0017.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 71,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0018.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 72,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0019.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 73,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0020.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 74,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0021.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 75,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0022.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 76,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0023.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 77,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0024.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 78,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0025.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 79,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0026.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 80,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0027.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 81,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0028.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 82,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0029.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 83,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0030.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 84,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0031.jpg",
        "description": "Lorem ipsum dom dollar"
    },
    {
        "id_collection": 2,
        "id": 85,
        "path": "photos/Europe 2021/NicolasCabra_20211109_0032.jpg",
        "description": "Lorem ipsum dom dollar"
    },
];


var id_collection_selected = 0
var id_photo_selected = 0

var photos_collection_selected = []
var index_photos_collection_selected = -1
var collection_selected = {}
var current_view = ""
var ordered = false


function refreshControls(){
    if(ordered)
        document.getElementById("order_by").classList.add("option_selected");
    else
        document.getElementById("order_by").classList.remove("option_selected");

    if(current_view == "sidebarView"){
        document.getElementById("view_sidebar").classList.add("option_selected");
        document.getElementById("grid_view").classList.remove("option_selected");
    }
    else if(current_view == "galleryView"){
        document.getElementById("view_sidebar").classList.remove("option_selected");
        document.getElementById("grid_view").classList.add("option_selected");
    }else{
        document.getElementById("view_sidebar").classList.remove("option_selected");
        document.getElementById("grid_view").classList.remove("option_selected");
    }
}


function orderByNameToggle(){
    if(!ordered){
        if(current_view == "sidebarView")
            sidebarView(id=-1,order="alphabetical")
        else
            galleryView(order="alphabetical")
        
    }
    else{
        if(current_view == "sidebarView")
            sidebarView()
        else
            galleryView()
    }

    refreshControls()
}

function galleryView(order=""){

    current_view = "galleryView"
    

    let collections_treated = collections.slice();

    if(order == "alphabetical"){
        // sort collections by name
        collections_treated.sort((a, b) => a.name.localeCompare(b.name));
        ordered = true
    }
    else
        ordered = false


    let toAdd = ""

    for (let index = 0; index < collections_treated.length; index++) {

        const element = collections_treated[index];


        toAdd += '<div class="mdl-cell mdl-cell--4-col "class="div_photo_grid" >'
        toAdd +=    '<div class="photo_wrapper">'
        toAdd +=       '<img class="photo_grid" src="'+element.cover_path+'">'
        toAdd +=    '</div>'
        toAdd +=    '<a class="link_photo_decorated" onclick="collectionView('+element.id+')">'+element.name+'</a>'
        if("year" in element){
            toAdd += '<a class="link_photo"> / </a>'
            toAdd += '<a class="link_photo">'+element.year+'</a>'
        }
        toAdd +=  '</div>'

    }

    document.getElementById("content").innerHTML = toAdd;

    refreshControls()

}

function sidebarView(id=-1, order=""){

    current_view = "sidebarView"


    
    if(id!=-1)
        id_collection_selected = id

    let collections_treated = collections.slice();

    if(order == "alphabetical"){
        // sort collections by name
        collections_treated.sort((a, b) => a.name.localeCompare(b.name));
        ordered = true
    }
    else
        ordered = false

    if(id==-1)
        id_collection_selected = collections_treated[0].id
    

    collection_selected = collections.find(c => c.id == id_collection_selected)

    console.log(id,collection_selected,collections_treated)

    photos_collection_selected = photos.filter(p => p.id_collection == id_collection_selected)
    index_photos_collection_selected = 0


    toAdd = '<div class="mdl-cell mdl-cell--3-col "class="div_photo_grid">';

    toAdd += '<h4 class="desktop" style="margin-top: 0 !important; width: 100% !important;">.</h4><p class="desktop">.</p>'

    for (let index = 0; index < collections_treated.length; index++) {

        const element = collections_treated[index];

        

        toAdd += '<a style="display:block; width:100% !important; text-align: left;"><span class="link_photo_decorated" onclick="sidebarView(id='+element.id+')">'+element.name+'</span>';
       

        if("year" in element){
            toAdd += '<span class="link_photo"> / </span>'
            toAdd += '<span class="link_photo">'+element.year+'</span>'
        }
        toAdd +=  '<p></p></span>'

    }

    toAdd += '</div>'

    toAdd += '<div id="sidebar_photo" class="mdl-cell mdl-cell--9-col "class="div_photo_grid">'

    toAdd += '</div>'
                        



    document.getElementById("content").innerHTML = toAdd;

    refreshSidebarView()

    refreshControls()
    
}

function refreshSidebarView(){

    let year = ""

    if("year" in collection_selected)
        year = collection_selected.year

    toAdd =  '<h4 style="margin-top: 0 !important; width: 100% !important;">'+collection_selected.name+' '+year+'</h4>'
    toAdd += '<a class="link_photo_decorated" onclick="previousPhotoSidebarView()">Previous</a>'
    toAdd += '<a class="link_photo" style="margin-left: 5px; margin-right: 5px;"> / </a>'
    toAdd += '<a class="link_photo_decorated" onclick="nextPhotoSidebarView()">Next<p></p></a>'
    toAdd += '<img id="photo" class="photo_grid" src="'+photos_collection_selected[index_photos_collection_selected].path+'">'
    toAdd += '<a id="count" style="width: 100% !important" class="link_photo">'+(index_photos_collection_selected+1)+' / '+photos_collection_selected.length+'</a>'

    toAdd += '<p id="description" style="font-size: 10pt; width: 100% !important">'+photos_collection_selected[index_photos_collection_selected].description+'</p>'

    document.getElementById("sidebar_photo").innerHTML = toAdd;

    
}


function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function collectionView(id,random_photo=false){

    ordered = false
    current_view = "collectionView"

    id_collection_selected = id

    collection_selected = collections.find(c => c.id == id)

    photos_collection_selected = photos.filter(p => p.id_collection == id)
    index_photos_collection_selected = 0

    

    if(random_photo){
        index_photos_collection_selected = getRandomInt(0,photos_collection_selected.length-1)
    }

    refreshColletionView()

    refreshControls()
    
}

function nextPhotoSidebarView(){

    if(index_photos_collection_selected+1<=photos_collection_selected.length-1){
        index_photos_collection_selected += 1
    }
    else{
        index_photos_collection_selected = 0
    }

    refreshSidebarView()
}

function nextPhotoSidebarView(){

    if(index_photos_collection_selected+1<=photos_collection_selected.length-1){
        index_photos_collection_selected += 1
    }
    else{
        index_photos_collection_selected = 0
    }

    refreshSidebarView()
}

function nextPhotoCollectionView(){

    if(index_photos_collection_selected+1<=photos_collection_selected.length-1){
        index_photos_collection_selected += 1
    }
    else{
        index_photos_collection_selected = 0
    }

    refreshColletionView()
}

function previousPhotoCollectionView(){
    if(index_photos_collection_selected-1>=0){
        index_photos_collection_selected -= 1
    }
    else{
        index_photos_collection_selected = photos_collection_selected.length-1
    }

    refreshColletionView()
}


function refreshColletionView(){

    let year = ""

    if("year" in collection_selected)
        year = collection_selected.year

    toAdd =  '<h4 style="margin-top: 0 !important; width: 100% !important;">'+collection_selected.name+' '+year+'</h4>\n'
    toAdd += '<a class="link_photo_decorated" onclick="previousPhotoCollectionView()">Previous</a>'
    toAdd += '<a class="link_photo" style="margin-left: 5px; margin-right: 5px;"> / </a>'
    toAdd += '<a class="link_photo_decorated" onclick="nextPhotoCollectionView()">Next<p></p></a>'
    toAdd += '<img id="photo" class="photo_grid" src="'+photos_collection_selected[index_photos_collection_selected].path+'">'
    toAdd += '<a id="count" style="width: 100% !important" class="link_photo">'+(index_photos_collection_selected+1)+' / '+photos_collection_selected.length+'</a>'

    toAdd += '<p id="description" style="font-size: 10pt; width: 100% !important">'+photos_collection_selected[index_photos_collection_selected].description+'</p>'

    document.getElementById("content").innerHTML = toAdd;
}



function randomPhotoView(){
    let index_coll = getRandomInt(0,collections.length-1)
    collectionView(collections[index_coll].id, true)
    
}